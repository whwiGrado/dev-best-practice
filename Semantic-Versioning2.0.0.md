# 语义化版本 2.0.0

## 摘要

标准的版本号必须（MUST）采用 X.Y.Z-a+b 的格式，其中 X、Y 和 Z 为非负的递增整数，且禁止在数字前方补零。

* 主版本号 X：当你做了不兼容的 API 修改
* 次版本号 Y：当你做了向下兼容的功能性新增
* 修订号 Z：当你做了向下兼容的问题修正
* 先行版本号 -a：表示这个版本并非稳定而且可能无法满足预期的兼容性需求

  ```
  格式：先加上一个连接号 "-" 再加上一连串以句点分隔的标识符来修饰
  标识符：必须由 ASCII 字母数字和连接号 [0-9A-Za-z-] 组成
  例如：1.0.0-alpha、1.0.0-alpha.1、1.0.0-beta.1、1.0.0-rc.1
  ```
* 版本编译元数据 +b：被标注在修订版或先行版本号之后

  ```
  格式：先加上一个加号 "+" 再加上一连串以句点分隔的标识符来修饰
  标识符：必须由 ASCII 字母数字和连接号 [0-9A-Za-z-] 组成
  例如：1.0.0-alpha+001、1.0.0+20130313144700、1.0.0-beta+exp.sha.5114f85
  ```


## 版本的优先层级
指的是不同版本在排序时如何比较

* 判断优先层级时，必须把版本依序拆分为主版本号、次版本号、修订号及先行版本号后进行比较（版本编译元数据不在这份比较的列表中）
* 由左到右依序比较每个标识符，第一个差异值用来决定优先层级：主版本号、次版本号及修订号以数值比较，例如：1.0.0 < 2.0.0 < 2.1.0 < 2.1.1
* 当主版本号、次版本号及修订号都相同时，改以优先层级比较低的先行版本号决定，例如：1.0.0-alpha < 1.0.0
* 有相同主版本号、次版本号及修订号的两个先行版本号，其优先层级必须透过由左到右的每个被句点分隔的标识符来比较，直到找到一个差异值后决定
  ```
  只有数字的标识符以数值高低比较，有字母或连接号时则逐字以 ASCII 的排序来比较
  数字的标识符比非数字的标识符优先层级低
  若开头的标识符都相同时，栏位比较多的先行版本号优先层级比较高
  范例：1.0.0-alpha < 1.0.0-alpha.1 < 1.0.0-alpha.beta < 1.0.0-beta < 1.0.0-beta.2 < 1.0.0-beta.11 < 1.0.0-rc.1 < 1.0.0
  ```

## 约定

1. 主版本号为零（0.y.z）的软件处于开发初始阶段，一切都可能随时被改变。这样的公共 API 不应该被视为稳定版，一般以 0.1.0 作为你的初始化开发版本。

2. 1.0.0 的版本号用于界定公共 API 的形成，这一版本之后所有的版本号更新都基于公共 API 及其修改内容。

3. 如果你每天都在改变 API，那么你应该仍在主版本号为零的阶段（0.y.z），或是正在下个主版本的独立开发分支中。

## FAQ
1. 万一不小心把一个不兼容的改版当成了次版本号发行了该怎么办？
* 一旦发现自己破坏了语义化版本控制的规范，就要修正这个问题，并发行一个新的次版本号来更正这个问题并且恢复向下兼容。
* 即使是这种情况，也不能去修改已发行的版本。可以的话，将有问题的版本号记录到文件中，告诉使用者问题所在，让他们能够意识到这是有问题的版本。

2. 我该如何处理即将弃用的功能？
弃用现存的功能是软件开发中的家常便饭，也通常是向前发展所必须的。当你弃用部份公共 API 时，你应该做两件事：
* 更新你的文件让使用者知道这个改变
* 在适当的时机将弃用的功能透过新的次版本号发布。在新的主版本完全移除弃用功能前，至少要有一个次版本包含这个弃用信息，这样使用者才能平顺地转移到新版 API
